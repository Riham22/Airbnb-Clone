<div class="become-host-container">
  <!-- Progress Header -->
  <header class="host-header">
    <div class="header-content">
      <button class="back-button" (click)="previousStep()" *ngIf="currentStep > 1" title="Go back" type="button">
        <svg viewBox="0 0 32 32" aria-hidden="true">
          <path d="M20 26l-10-10 10-10"></path>
        </svg>
        <span class="sr-only">Go back</span>
      </button>
      <h1>Become a Host</h1>
      <div class="progress-container">
        <div class="progress-bar">
          <div class="progress-fill" [style.width.%]="progress"></div>
        </div>
        <span class="progress-text">Step {{ currentStep }} of {{ totalSteps }}</span>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="host-main">
    <div class="step-container">
      <!-- Error/Success Messages -->
      <div *ngIf="errorMessage" class="error-alert" role="alert">
        {{ errorMessage }}
      </div>
      <div *ngIf="successMessage" class="success-alert" role="alert">
        {{ successMessage }}
      </div>

      <!-- Step Header -->
      <div class="step-header">
        <h2>{{ getStepTitle() }}</h2>
        <p class="step-description">{{ getStepDescription() }}</p>
      </div>

      <!-- Step 1: Property Type -->
      <div class="step-content" *ngIf="currentStep === 1">
        <div class="property-type-grid">
          <div *ngFor="let type of propertyTypes"
               class="property-type-card"
               [class.selected]="listingData.propertyType === type.value"
               (click)="selectPropertyType(type.value)"
               role="button"
               tabindex="0"
               (keyup.enter)="selectPropertyType(type.value)"
               (keyup.space)="selectPropertyType(type.value)"
               [attr.aria-label]="type.label">
            <span class="property-icon">{{ type.icon }}</span>
            <span class="property-label">{{ type.label }}</span>
          </div>
        </div>

        <div class="step-actions">
          <button class="next-button"
                  [disabled]="!listingData.propertyType"
                  (click)="nextStep()"
                  type="button">
            Next
          </button>
        </div>
      </div>

      <!-- Step 2: Location -->
      <div class="step-content" *ngIf="currentStep === 2">
        <div class="location-input">
          <label for="location-search">Where's your place located?</label>
          <input type="text"
                 id="location-search"
                 placeholder="Enter your address"
                 [(ngModel)]="listingData.location"
                 (input)="searchLocations($event.target?.value || '')"
                 class="location-search">

          <div class="location-suggestions" *ngIf="locationSuggestions.length > 0">
            <div *ngFor="let suggestion of locationSuggestions"
                 class="suggestion-item"
                 (click)="selectLocation(suggestion)"
                 role="button"
                 tabindex="0"
                 (keyup.enter)="selectLocation(suggestion)">
              üìç {{ suggestion }}
            </div>
          </div>
        </div>

        <div class="privacy-notice">
          <div class="privacy-icon">üîí</div>
          <div>
            <strong>Your address is private</strong>
            <p>Your exact address will only be shared with confirmed guests.</p>
          </div>
        </div>

        <div class="step-actions">
          <button class="next-button"
                  [disabled]="!listingData.location"
                  (click)="nextStep()"
                  type="button">
            Next
          </button>
        </div>
      </div>

      <!-- Step 3: Capacity -->
      <div class="step-content" *ngIf="currentStep === 3">
        <div class="capacity-section">
          <div class="capacity-item">
            <div class="capacity-info">
              <h3>Guests</h3>
              <p>How many guests can your place accommodate?</p>
            </div>
            <div class="capacity-controls">
              <button type="button" (click)="updateGuests(-1, 'guests')" title="Decrease guests">‚àí</button>
              <span>{{ listingData.guests }}</span>
              <button type="button" (click)="updateGuests(1, 'guests')" title="Increase guests">+</button>
            </div>
          </div>

          <div class="capacity-item">
            <div class="capacity-info">
              <h3>Bedrooms</h3>
              <p>How many separate bedrooms are available?</p>
            </div>
            <div class="capacity-controls">
              <button type="button" (click)="updateGuests(-1, 'bedrooms')" title="Decrease bedrooms">‚àí</button>
              <span>{{ listingData.bedrooms }}</span>
              <button type="button" (click)="updateGuests(1, 'bedrooms')" title="Increase bedrooms">+</button>
            </div>
          </div>

          <div class="capacity-item">
            <div class="capacity-info">
              <h3>Beds</h3>
              <p>How many beds can guests use?</p>
            </div>
            <div class="capacity-controls">
              <button type="button" (click)="updateGuests(-1, 'beds')" title="Decrease beds">‚àí</button>
              <span>{{ listingData.beds }}</span>
              <button type="button" (click)="updateGuests(1, 'beds')" title="Increase beds">+</button>
            </div>
          </div>

          <div class="capacity-item">
            <div class="capacity-info">
              <h3>Bathrooms</h3>
              <p>How many bathrooms are available?</p>
            </div>
            <div class="capacity-controls">
              <button type="button" (click)="updateGuests(-1, 'bathrooms')" title="Decrease bathrooms">‚àí</button>
              <span>{{ listingData.bathrooms }}</span>
              <button type="button" (click)="updateGuests(1, 'bathrooms')" title="Increase bathrooms">+</button>
            </div>
          </div>
        </div>

        <div class="step-actions">
          <button class="next-button" type="button" (click)="nextStep()">
            Next
          </button>
        </div>
      </div>

      <!-- Step 4: Amenities (Accessible Version) -->
      <div class="step-content" *ngIf="currentStep === 4">
        <div class="amenities-grid">
          <div *ngFor="let amenity of amenitiesList"
               class="amenity-card"
               [class.selected]="isAmenitySelected(amenity.value)">
            <input type="checkbox"
                   [id]="'amenity-' + amenity.value"
                   [name]="'amenity-' + amenity.value"
                   [value]="amenity.value"
                   [checked]="isAmenitySelected(amenity.value)"
                   (change)="toggleAmenity(amenity.value)"
                   class="amenity-checkbox">
            <label [for]="'amenity-' + amenity.value"
                   class="amenity-label">
              <span class="amenity-icon">{{ amenity.icon }}</span>
              <span class="amenity-label-text">{{ amenity.label }}</span>
              <span class="checkmark" *ngIf="isAmenitySelected(amenity.value)">‚úì</span>
            </label>
          </div>
        </div>

        <div class="step-actions">
          <button class="next-button" type="button" (click)="nextStep()">
            Next
          </button>
        </div>
      </div>

      <!-- Step 5: Description -->
      <div class="step-content" *ngIf="currentStep === 5">
        <div class="description-section">
          <div class="form-group">
            <label for="title-input">Listing Title</label>
            <input type="text"
                   id="title-input"
                   placeholder="e.g., Cozy apartment near downtown"
                   [(ngModel)]="listingData.title"
                   maxlength="50"
                   class="title-input">
            <span class="char-count">{{ listingData.title?.length || 0 }}/50</span>
          </div>

          <div class="form-group">
            <label for="description-textarea">Description</label>
            <textarea
              id="description-textarea"
              placeholder="Describe what makes your place special..."
              [(ngModel)]="listingData.description"
              rows="6"
              maxlength="500"
              class="description-textarea"></textarea>
            <span class="char-count">{{ listingData.description?.length || 0 }}/500</span>
          </div>

          <div class="photo-upload">
            <label for="photo-upload-input">Photos</label>
            <p>Add at least 5 photos to showcase your space</p>
            <div class="photo-grid">
              <div *ngFor="let photo of listingData.photos; let i = index" class="photo-item">
                <img [src]="photo" alt="'Property photo ' + (i + 1)">
                <button type="button" class="remove-photo" (click)="removePhoto(i)" title="Remove photo">√ó</button>
              </div>
              <div class="photo-upload-placeholder" *ngIf="listingData.photos.length < 10">
                <input id="photo-upload-input" title="photo" type="file"
                       multiple
                       accept="image/*"
                       (change)="handlePhotoUpload($event)"
                       class="photo-input">
                <div class="upload-content">
                  <span class="upload-icon">üì∑</span>
                  <span>Add Photos</span>
                </div>
              </div>
            </div>
            <p *ngIf="listingData.photos.length < 5" class="photo-warning">
              Need {{ 5 - listingData.photos.length }} more photos
            </p>
          </div>
        </div>

        <div class="step-actions">
          <button class="next-button" type="button"
                  [disabled]="!listingData.title || !listingData.description || listingData.photos.length < 5"
                  (click)="nextStep()">
            Next
          </button>
        </div>
      </div>

      <!-- Step 6: Price & Availability -->
      <div class="step-content" *ngIf="currentStep === 6">
        <div class="pricing-section">
          <div class="price-input">
            <label for="price-control-input">Nightly Price ($)</label>
            <div class="price-control">
              <span class="currency">$</span>
              <input id="price-control-input" title="price" type="number"
                     [(ngModel)]="listingData.price"
                     [placeholder]="getPriceSuggestion().toString()"
                     min="10"
                     max="10000"
                     step="1">
            </div>
            <p class="price-suggestion">
              Suggested price: ${{ getPriceSuggestion() }} per night
            </p>
          </div>

          <div class="earnings-estimate">
            <h3>Estimated Monthly Earnings</h3>
            <div class="earnings-amount">
              ${{ calculateEstimatedEarnings() }}
            </div>
            <p>Based on 20 booking days per month</p>
          </div>

          <div class="availability-settings">
            <h3>Availability Settings</h3>

            <div class="setting-item">
              <label class="toggle-label">
                <input type="checkbox"
                       [(ngModel)]="listingData.availability.instantBook"
                       id="instant-book">
                <span class="toggle-slider"></span>
                <span class="toggle-text">Instant Book</span>
              </label>
              <p>Guests can book without waiting for your approval</p>
            </div>

            <div class="setting-item">
              <label>Check-in Window</label>
              <div class="time-inputs">
                <select title="checkInStart" name="checkInStart" id="checkInStart" 
                        [(ngModel)]="listingData.availability.checkInStart">
                  <option value="">Select start time</option>
                  <option *ngFor="let time of ['14:00', '15:00', '16:00', '17:00']" [value]="time">
                    {{ time }}
                  </option>
                </select>
                <span>to</span>
                <select title="checkInEnd" name="checkInEnd" id="checkInEnd" 
                        [(ngModel)]="listingData.availability.checkInEnd">
                  <option value="">Select end time</option>
                  <option *ngFor="let time of ['19:00', '20:00', '21:00', '22:00']" [value]="time">
                    {{ time }}
                  </option>
                </select>
              </div>
            </div>

            <div class="setting-item">
              <label for="checkOut">Check-out Time</label>
              <select name="checkOut" id="checkOut" title="checkOut" 
                      [(ngModel)]="listingData.availability.checkOut">
                <option value="">Select check-out time</option>
                <option *ngFor="let time of ['10:00', '11:00', '12:00']" [value]="time">
                  {{ time }}
                </option>
              </select>
            </div>
          </div>
        </div>

        <div class="step-actions final-actions">
          <button class="publish-button" type="button"
                  [disabled]="isSubmitting"
                  (click)="submitListing()">
            <span *ngIf="!isSubmitting">Publish Listing</span>
            <span *ngIf="isSubmitting">Publishing...</span>
          </button>
          <p class="publish-note">
            By publishing, you agree to our Host Terms and Community Guidelines
          </p>
        </div>
      </div>
    </div>
  </main>

  <!-- Benefits Sidebar -->
  <aside class="host-benefits">
    <div class="benefits-card">
      <h3>Why host on Airbnb?</h3>

      <div class="benefit-item">
        <div class="benefit-icon">üí∞</div>
        <div>
          <h4>Earn extra income</h4>
          <p>Hosts earn an average of $924 per month</p>
        </div>
      </div>

      <div class="benefit-item">
        <div class="benefit-icon">üåé</div>
        <div>
          <h4>Join a global community</h4>
          <p>Connect with travelers from around the world</p>
        </div>
      </div>

      <div class="benefit-item">
        <div class="benefit-icon">üõ°Ô∏è</div>
        <div>
          <h4>Host protection</h4>
          <p>$1 million in property damage protection</p>
        </div>
      </div>

      <div class="benefit-item">
        <div class="benefit-icon">üì±</div>
        <div>
          <h4>Easy management</h4>
          <p>Manage your listing with our mobile app</p>
        </div>
      </div>

      <div class="support-info">
        <h4>24/7 Support</h4>
        <p>Our global community support team is here to help</p>
        <button class="support-button" type="button" title="Contact support">Contact Support</button>
      </div>
    </div>
  </aside>
</div>