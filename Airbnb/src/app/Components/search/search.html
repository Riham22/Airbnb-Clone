<!-- search.html -->
<nav class="navbar bg-transparent">
  <!-- Top Row: Logo, Property Filters, Icons -->
  <div class="navbar-top bg-transparent">
    <div class="navbar-brand">airbnb</div>

    <!-- Property Type Filter Bar -->
    <div class="property-type-bar">
      <div class="property-type-filters">
        <div *ngFor="let type of propertyTypes" class="property-type-option"
          [class.active]="selectedPropertyType === type.value" (click)="selectPropertyType(type.value)">
          <span class="type-icon" [ngSwitch]="type.value">
            <!-- All -->
            <svg *ngSwitchCase="'all'" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"
              role="presentation" focusable="false"
              style="display: block; height: 16px; width: 16px; fill: currentcolor;">
              <path
                d="M16 1a15 15 0 1 1 0 30 15 15 0 0 1 0-30zm0 2a13 13 0 1 0 0 26 13 13 0 0 0 0-26zm0 13a2 2 0 1 1 0 4 2 2 0 0 1 0-4zm-6 0a2 2 0 1 1 0 4 2 2 0 0 1 0-4zm12 0a2 2 0 1 1 0 4 2 2 0 0 1 0-4z">
              </path>
            </svg>
            <!-- Properties (Home) -->
            <svg *ngSwitchCase="'property'" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"
              role="presentation" focusable="false"
              style="display: block; height: 16px; width: 16px; fill: currentcolor;">
              <path d="M16 1L1 16h3v15h9V20h6v11h9V16h3L16 1zm0 2.83L25.17 13H25v16h-5V18h-8v11H7V13h-.17L16 3.83z">
              </path>
            </svg>
            <!-- Experiences (Ticket/Activity) -->
            <svg *ngSwitchCase="'experience'" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"
              role="presentation" focusable="false"
              style="display: block; height: 16px; width: 16px; fill: currentcolor;">
              <path
                d="M26 4.5A2.5 2.5 0 0 0 23.5 7v1H22V6.5a2.5 2.5 0 0 0-5 0V8h-2V6.5a2.5 2.5 0 0 0-5 0V8H8.5A2.5 2.5 0 0 0 6 10.5V26a5 5 0 0 0 5 5h10a5 5 0 0 0 5-5V10.5A2.5 2.5 0 0 0 23.5 8H22a2.5 2.5 0 0 0 1.5-2.25V4.5zM12 6.5a.5.5 0 0 1 1 0V8h-1V6.5zm5 0a.5.5 0 0 1 1 0V8h-1V6.5zm5 .5V8h-1V7a.5.5 0 0 1 1 0zM24 26a3 3 0 0 1-3 3H11a3 3 0 0 1-3-3V10.5a.5.5 0 0 1 .5-.5h15a.5.5 0 0 1 .5.5V26z">
              </path>
            </svg>
            <!-- Services (Tools) -->
            <svg *ngSwitchCase="'service'" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"
              role="presentation" focusable="false"
              style="display: block; height: 16px; width: 16px; fill: currentcolor;">
              <path
                d="M23.5 13.5l-4-4L22 7l-2-2-2.5 2.5-4-4L12 5l2.5 2.5L10 12l-7 7 5 5 7-7 4.5 4.5 1.5-1.5-4-4 2.5-2.5 2-2 1.5 2.5zM8.5 22.5l-2-2 7-7 2 2-7 7z">
              </path>
            </svg>
          </span>
          {{ type.label }}
        </div>
      </div>
    </div>

    <!-- Right Side Icons -->
    <div class="navbar-actions">
      <!-- My Trips Direct Link -->
      <div class="nav-icon" routerLink="/trips" title="My Trips" *ngIf="isAuthenticated">
        <span style="font-size: 18px;">✈️</span>
      </div>

      <!-- User Menu -->
      <div class="user-menu-wrapper">
        <div class="user-menu" (click)="toggleMenuPanel()">
          <button class="user-menu-btn">
            <!-- Enhanced user display -->
            <div class="user-display" *ngIf="isAuthenticated && currentUser; else loginDisplay">
              <div class="user-avatar">
                {{ getUserInitials() }}
              </div>
              <div class="user-info">
                <span class="user-name">{{ getUserDisplayName() }}</span>
              </div>
              <svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="presentation"
                focusable="false" class="chevron">
                <path
                  d="M4.47 5.72a.75.75 0 0 1 1.06 0L8 8.19l2.47-2.47a.75.75 0 1 1 1.06 1.06l-3 3a.75.75 0 0 1-1.06 0l-3-3a.75.75 0 0 1 0-1.06z">
                </path>
              </svg>
            </div>
            <ng-template #loginDisplay>
              <div class="user-display">
                <div class="user-avatar guest">
                  <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="presentation"
                    focusable="false">
                    <path
                      d="M16 .7C7.56.7.7 7.56.7 16S7.56 31.3 16 31.3 31.3 24.44 31.3 16 24.44.7 16 .7zm0 28c-4.02 0-7.6-1.88-9.93-4.81a12.43 12.43 0 0 1 6.45-4.4A6.5 6.5 0 0 1 9.5 14a6.5 6.5 0 0 1 13 0 6.51 6.51 0 0 1-3.02 5.5 12.42 12.42 0 0 1 6.45 4.4A12.67 12.67 0 0 1 16 28.7z">
                    </path>
                  </svg>
                </div>
                <div class="user-info">
                  <span class="user-name">{{ getUserDisplayName() }}</span>
                </div>
                <svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="presentation"
                  focusable="false" class="chevron">
                  <path
                    d="M4.47 5.72a.75.75 0 0 1 1.06 0L8 8.19l2.47-2.47a.75.75 0 1 1 1.06 1.06l-3 3a.75.75 0 0 1-1.06 0l-3-3a.75.75 0 0 1 0-1.06z">
                  </path>
                </svg>
              </div>
            </ng-template>
          </button>
        </div>
      </div>
    </div>
  </div>



</nav>




<!-- Menu Panel -->
<div class="menu-panel scrollable" [class.active]="showMenuPanel">
  <div class="panel-header">
    <h3 class="panel-title">Menu</h3>
    <button class="close-panel" (click)="toggleMenuPanel()">×</button>
  </div>

  <div class="menu-list">
    <!-- User info section -->
    <div class="user-section" *ngIf="isAuthenticated && currentUser">
      <div class="user-avatar-large">
        {{ getUserInitials() }}
      </div>
      <div class="user-details">
        <h3 class="user-fullname">{{ currentUser }} </h3>
        <p class="user-email">{{ currentUser.email }}</p>
      </div>
    </div>

    <!-- Menu items -->
    <div *ngFor="let item of menuItems" class="menu-section">
      <div *ngIf="item.separator" class="menu-separator"></div>

      <div *ngIf="!item.separator && item.action !== 'logout'" class="menu-option" (click)="onMenuItemClick(item)">
        <span class="menu-icon">{{ item.icon }}</span>
        <div class="menu-content">
          <span class="menu-label">{{ item.label }}</span>
        </div>
      </div>
    </div>

    <!-- Logout section -->
    <div class="logout-section" *ngIf="isAuthenticated">
      <div class="menu-separator"></div>
      <button class="logout-btn styled" (click)="logout()">
        <span class="logout-icon"></span>
        <span class="logout-label">Log out</span>
      </button>
    </div>
  </div>
</div>




