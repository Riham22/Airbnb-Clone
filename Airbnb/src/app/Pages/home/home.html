<div class="home-container">
  <!-- NavBar (Only property type filtering) -->
  <app-nav-bar style="z-index: 3000;"
    (filteredPropertiesChange)="onFilteredPropertiesChange($event)"
    (openFilters)="onOpenFilters()">
  </app-nav-bar>

  <!-- Main Search Bar (Where/When/Who filtering) -->
  <div class="overlay"></div>
  <div class="main-hero h-lvh w-full text-center mb-8">
    <img src="Home/Hero.avif" style="object-fit: cover;" alt="Home Hero Image" class="hero-image h-full w-full mb-4" />
    <app-main-search-bar class="absolute top-1/3 m-auto left-0 right-0" style="z-index: 2000;"
      (openFilters)="onOpenFilters()"
      (filtersChanged)="onSearchFiltersChanged($event)">
    </app-main-search-bar>
    <div class="hero-text">
      <h1>Not sure where to go? <span>Perfect!</span></h1>
      <p>We'll help you find the perfect place to stay.</p>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-state">
    <div class="loading-spinner">Loading listings...</div>
  </div>

  <!-- Results Section -->
  <div *ngIf="!isLoading" class="main-content bg-white">
    <!-- Results Header -->
    <div class="results-header" id="property-list">
      <h2 class="results-title">{{ getResultsTitle() }}</h2>
      <div class="results-count">
        <span *ngIf="filteredProperties.length > 0">{{ filteredProperties.length }} listings</span>
        <span *ngIf="filteredProperties.length === 0">No listings found</span>
      </div>
    </div>

    <!-- Debug Info (يمكن إزالته في الإنتاج) -->
    <div class="debug-info" *ngIf="filteredProperties.length === 0 && !isLoading">
      <p>Debug info:</p>
      <p>Properties: {{ allProperties?.length }}</p>
      <p>Experiences: {{ allExperiences?.length }}</p>
      <p>Services: {{ allServices?.length }}</p>
      <p>Active Filters: {{ activeFilters | json }}</p>
    </div>

    <!-- Property List -->
    <app-property-list class="bg-transparent"
      [properties]="filteredProperties"
      [filters]="activeFilters"
      (propertyClick)="onPropertyClick($event)"
      (wishlistChange)="onWishlistChange($event)">
    </app-property-list>
  </div>

  <!-- Filter Modal -->
  <app-filter-modal
    [isOpen]="isFilterModalOpen"
    (close)="closeFilters()"
    (applyFilters)="onApplyFilters($event)">
  </app-filter-modal>
</div>
